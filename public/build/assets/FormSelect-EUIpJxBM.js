import{f as l,o,a as v,g as x,d as k,s as K,y as U,z as H,h as d,n as h,i as Q,t as f,b as B,e as G,q as J,u as E,w as W,F as X,j as Y,T as Z,E as ee}from"./app-BkLrAedk.js";import{_ as te}from"./FormInput-CavIJ5sh.js";/* empty css                                                                   */import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as se}from"./XMarkIcon-BBq-wmW1.js";import{r as le}from"./CheckIcon-DtsMpUWF.js";function oe(s,z){return o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})])}const re={class:"form-group"},ne=["for"],ue={key:0,class:"text-red-500 ml-1"},ce={class:"relative"},ie={key:0,class:"relative"},de=["id","placeholder","disabled"],fe={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ve={class:"text-gray-900 dark:text-gray-100 truncate"},ge=["id","disabled"],pe={class:"flex items-center"},me={key:1,class:"block truncate text-left text-gray-500 dark:text-gray-400"},ye={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},be={key:0,class:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400 text-center"},he={key:1,class:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400 text-center"},xe=["onClick","onMouseenter"],ke={class:"flex items-center px-3 py-2"},we={class:"block truncate font-normal"},Ve={key:1,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Se={key:2,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Be={key:3,class:"mt-1 text-sm text-green-600 dark:text-green-400"},_e={__name:"FormSelect",props:{modelValue:{type:[String,Number,Object,Array],default:null},options:{type:Array,default:()=>[]},optionLabel:{type:[String,Function],default:"label"},optionValue:{type:[String,Function],default:"value"},label:{type:String,default:""},placeholder:{type:String,default:"Select an option"},searchPlaceholder:{type:String,default:"Search options..."},helpText:{type:String,default:""},errorMessage:{type:String,default:""},successMessage:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)}},emits:["update:modelValue","change","search","open","close"],setup(s,{expose:z,emit:R}){const t=s,c=R,w=x(null),m=x(null),i=x(!1),r=x(-1),g=x(""),F=x("down"),M=k(()=>`select-${Math.random().toString(36).substr(2,9)}`),y=k(()=>t.multiple?t.modelValue||[]:t.modelValue&&t.options.find(e=>V(e)===t.modelValue)||null),p=k(()=>!!t.errorMessage),L=k(()=>!!t.successMessage),_=k(()=>{if(!t.searchable||!g.value)return t.options;const e=g.value.toLowerCase();return t.options.filter(a=>C(a).toLowerCase().includes(e))}),O=k(()=>{const e=["relative","block","w-full","rounded-md","border","shadow-sm","transition-colors","duration-200","focus:outline-none","focus:ring-2","focus:ring-offset-0","bg-white","dark:bg-gray-900","text-gray-900","dark:text-gray-100"],a={sm:"px-3 py-1.5 text-sm",md:"px-3 py-2 text-sm",lg:"px-4 py-3 text-base"};return[...e,...a[t.size].split(" "),"border-gray-300","dark:border-gray-600","focus:border-blue-500","focus:ring-blue-500"]}),C=e=>typeof t.optionLabel=="function"?t.optionLabel(e):e[t.optionLabel]||e,V=e=>typeof t.optionValue=="function"?t.optionValue(e):e[t.optionValue]||e,N=e=>t.multiple?(t.modelValue||[]).includes(V(e)):V(e)===t.modelValue,S=()=>{t.disabled||(i.value=!0,r.value=-1,c("open"),ee(()=>{D(),t.searchable&&m.value&&m.value.focus()}))},b=()=>{i.value=!1,r.value=-1,g.value="",c("close")},q=()=>{i.value?b():S()},$=e=>{const a=V(e);if(t.multiple){const n=t.modelValue||[],u=n.includes(a)?n.filter(T=>T!==a):[...n,a];c("update:modelValue",u),c("change",u)}else c("update:modelValue",a),c("change",a),b()},P=()=>{const e=t.multiple?[]:null;c("update:modelValue",e),c("change",e)},A=e=>{switch(e.key){case"ArrowDown":e.preventDefault(),i.value?r.value=Math.min(r.value+1,_.value.length-1):S();break;case"ArrowUp":e.preventDefault(),i.value&&(r.value=Math.max(r.value-1,0));break;case"Enter":e.preventDefault(),i.value&&r.value>=0?$(_.value[r.value]):i.value||S();break;case"Escape":e.preventDefault(),b();break;case"Tab":b();break}},j=e=>{setTimeout(()=>{var a;(a=e.relatedTarget)!=null&&a.closest(".select-option")||b()},150)},D=()=>{if(!w.value&&!m.value)return;const a=(w.value||m.value).getBoundingClientRect(),n=window.innerHeight-a.bottom,u=a.top;F.value=n<200&&u>n?"up":"down"},I=e=>{const a=w.value||m.value;a&&!a.contains(e.target)&&!e.target.closest(".select-option")&&b()};return K(g,e=>{c("search",e),r.value=-1}),U(()=>{document.addEventListener("click",I),window.addEventListener("resize",D)}),H(()=>{document.removeEventListener("click",I),window.removeEventListener("resize",D)}),z({open:S,close:b,focus:()=>{const e=w.value||m.value;e==null||e.focus()}}),(e,a)=>(o(),l("div",re,[s.label?(o(),l("label",{key:0,for:M.value,class:h(["block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",{"text-red-600 dark:text-red-400":p.value}])},[Q(f(s.label)+" ",1),s.required?(o(),l("span",ue,"*")):d("",!0)],10,ne)):d("",!0),v("div",ce,[s.searchable?(o(),l("div",ie,[G(v("input",{id:M.value,ref_key:"searchInputRef",ref:m,"onUpdate:modelValue":a[0]||(a[0]=n=>g.value=n),type:"text",placeholder:s.searchPlaceholder,disabled:s.disabled,class:h(["form-select-input",[O.value,{"border-red-300 dark:border-red-600 focus:border-red-500 focus:ring-red-500":p.value,"border-green-300 dark:border-green-600 focus:border-green-500 focus:ring-green-500":L.value&&!p.value,"opacity-50 cursor-not-allowed":s.disabled}]]),onFocus:S,onBlur:j,onKeydown:A},null,42,de),[[J,g.value]]),!i.value&&y.value&&!g.value?(o(),l("div",fe,[v("span",ve,f(C(y.value)),1)])):d("",!0)])):(o(),l("button",{key:1,id:M.value,ref_key:"selectButtonRef",ref:w,type:"button",disabled:s.disabled,class:h(["form-select-button",[O.value,{"border-red-300 dark:border-red-600 focus:border-red-500 focus:ring-red-500":p.value,"border-green-300 dark:border-green-600 focus:border-green-500 focus:ring-green-500":L.value&&!p.value,"opacity-50 cursor-not-allowed":s.disabled}]]),onClick:q,onKeydown:A},[v("span",pe,[y.value?(o(),l("span",{key:0,class:h(["block truncate text-left",y.value?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400"])},f(y.value?C(y.value):s.placeholder),3)):(o(),l("span",me,f(s.placeholder),1))]),v("span",ye,[B(E(oe),{class:"h-5 w-5 text-gray-400"})])],42,ge)),s.clearable&&y.value&&!s.disabled?(o(),l("button",{key:2,type:"button",class:"absolute inset-y-0 right-8 flex items-center pr-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:P},[B(E(se),{class:"h-4 w-4"})])):d("",!0),B(Z,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:W(()=>[i.value?(o(),l("div",{key:0,class:h(["absolute z-50 mt-1 w-full bg-white dark:bg-gray-800 shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none",F.value==="up"?"bottom-full mb-1":"top-full"])},[s.loading?(o(),l("div",be,[B(te,{class:"h-4 w-4 mx-auto"}),a[1]||(a[1]=v("span",{class:"ml-2"},"Loading...",-1))])):_.value.length===0?(o(),l("div",he,f(g.value?"No results found":"No options available"),1)):(o(!0),l(X,{key:2},Y(_.value,(n,u)=>(o(),l("div",{key:V(n),class:h(["select-option",{"bg-blue-600 text-white":u===r.value,"text-gray-900 dark:text-gray-100":u!==r.value,"bg-blue-50 dark:bg-blue-900":N(n)&&u!==r.value}]),onClick:T=>$(n),onMouseenter:T=>r.value=u},[v("div",ke,[v("span",we,f(C(n)),1),N(n)?(o(),l("span",{key:0,class:h(["absolute inset-y-0 right-0 flex items-center pr-4",u===r.value?"text-white":"text-blue-600 dark:text-blue-400"])},[B(E(le),{class:"h-5 w-5"})],2)):d("",!0)])],42,xe))),128))],2)):d("",!0)]),_:1})]),s.helpText&&!p.value?(o(),l("p",Ve,f(s.helpText),1)):d("",!0),p.value?(o(),l("p",Se,f(s.errorMessage),1)):d("",!0),L.value&&!p.value&&s.successMessage?(o(),l("p",Be,f(s.successMessage),1)):d("",!0)]))}},ze=ae(_e,[["__scopeId","data-v-305e12ee"]]);export{ze as F};
