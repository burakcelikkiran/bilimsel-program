import{g as k,d as p,y as B,G as K,c as _,o as a,w as y,b as n,a as e,f as i,h as x,u as l,l as A,t as d,i as b,S as w,n as V,F as D,j as z,J as T}from"./app-BkLrAedk.js";import{A as N}from"./AdminLayout-CHzjQs8f.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as q}from"./CursorArrowRaysIcon-zGiFA1bP.js";import{r as C}from"./ExclamationTriangleIcon-DdIvds6G.js";import{r as F}from"./EyeIcon-Cyvl-doX.js";import{r as G}from"./CheckIcon-DtsMpUWF.js";import{r as J}from"./ClockIcon-DifFxn8x.js";import{r as M}from"./CalendarDaysIcon-RpqlH8E2.js";import{r as U}from"./PlusIcon-DoV9BNAc.js";import{r as P}from"./InformationCircleIcon-Bi46gR1E.js";import"./HomeIcon-BQBmvNzm.js";import"./UsersIcon-BSahiIS1.js";const R={class:"mb-6"},H={class:"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},I={class:"p-6 border-b border-gray-200 dark:border-gray-700"},X={class:"flex items-center justify-between"},Y={class:"flex items-center space-x-4"},Z={class:"h-12 w-12 bg-orange-600 rounded-xl flex items-center justify-center"},Q={class:"text-2xl font-bold text-gray-900 dark:text-white"},W={class:"text-sm text-orange-600 dark:text-orange-400"},ee={class:"flex items-center space-x-3"},te=["disabled"],ae={key:1,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},re={key:0,class:"px-6 py-4 bg-orange-50 dark:bg-orange-900/20"},se={class:"flex items-center justify-between"},ie={class:"flex items-center space-x-2"},le={class:"text-sm font-medium text-orange-800 dark:text-orange-200"},ne={class:"mt-3 space-y-1"},de={key:0,class:"text-xs text-orange-600 dark:text-orange-400"},oe={class:"space-y-8"},me={key:0,class:"flex items-center justify-center py-12"},ue={key:1,class:"bg-white shadow rounded-lg"},ce={class:"p-6"},ge={key:0,class:"text-center py-12"},ke={class:"mx-auto h-16 w-16 text-gray-400 mb-4"},be={key:1},ve={class:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center"},ye={class:"text-sm text-gray-400"},xe={key:0,class:"mt-8"},he={class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6"},fe={class:"flex items-start space-x-3"},pe={class:"flex-1"},_e={class:"space-y-2"},we={class:"text-sm font-medium text-red-800 dark:text-red-200"},De={class:"text-sm text-red-600 dark:text-red-300 mt-1"},ze={class:"mt-8"},Te={class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6"},Ce={class:"flex items-start space-x-3"},Ee={__name:"Edit",props:{event:{type:Object,required:!0},timelineData:{type:Array,required:!0},editableData:{type:Object,default:()=>({})},availableVenues:{type:Array,default:()=>[]},availableCategories:{type:Array,default:()=>[]}},setup(o){var f;const c=o,E=k(!1),m=k(!1),u=k([]),v=k(((f=c.editableData)==null?void 0:f.conflicts)||[]),S=p(()=>[{label:"Ana Sayfa",href:route("admin.dashboard")},{label:"Etkinlikler",href:route("admin.events.index")},{label:c.event.name,href:route("admin.events.show",c.event.slug)},{label:"Timeline",href:route("admin.timeline.show",c.event.slug)},{label:"Düzenle",href:null}]),g=p(()=>u.value.length>0),O=async()=>{var r;if(!(!g.value||m.value)){m.value=!0;try{const s=await(await fetch(route("admin.timeline.update-order",c.event.slug),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({changes:u.value,timeline_data:c.timelineData})})).json();if(s.success)u.value=[],v.value=((r=s.data)==null?void 0:r.conflicts)||[],window.toast&&window.toast.success("Tüm değişiklikler başarıyla kaydedildi!"),setTimeout(()=>{T.reload({only:["timelineData","editableData"]})},1e3);else throw new Error(s.message||"Kaydetme sırasında hata oluştu")}catch(t){console.error("Save error:",t),window.toast&&window.toast.error("Değişiklikler kaydedilemedi: "+t.message)}finally{m.value=!1}}},$=()=>{confirm("Tüm kaydedilmemiş değişiklikler iptal edilecek. Emin misiniz?")&&T.reload()},j=r=>{switch(r.type){case"session_moved":return`Oturum taşındı: ${r.session_title||"Oturum"}`;case"session_reordered":return"Oturum sırası değiştirildi";default:return"Bilinmeyen değişiklik"}},h=r=>{if(g.value)return r.preventDefault(),r.returnValue="Kaydedilmemiş değişiklikler var. Sayfadan çıkmak istediğinizden emin misiniz?",r.returnValue};return B(()=>{window.addEventListener("beforeunload",h)}),K(()=>{window.removeEventListener("beforeunload",h)}),(r,t)=>(a(),_(N,{"page-title":`${o.event.name} - Timeline Düzenleyici`,"page-subtitle":"Etkinlik programını sürükle-bırak ile düzenleyin",breadcrumbs:S.value},{default:y(()=>[n(l(A),{title:`${o.event.name} - Timeline Düzenleyici`},null,8,["title"]),e("div",R,[e("div",H,[e("div",I,[e("div",X,[e("div",Y,[e("div",Z,[n(l(q),{class:"h-8 w-8 text-white"})]),e("div",null,[e("h1",Q,d(o.event.name),1),e("p",W,[n(l(C),{class:"h-4 w-4 inline mr-1"}),t[0]||(t[0]=b(" Düzenleme Modu - Oturumları sürükleyerek yeniden düzenleyebilirsiniz "))])])]),e("div",ee,[n(l(w),{href:r.route("admin.timeline.show",o.event.slug),class:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},{default:y(()=>[n(l(F),{class:"h-4 w-4 mr-2"}),t[1]||(t[1]=b(" Sadece Görüntüle "))]),_:1,__:[1]},8,["href"]),e("button",{onClick:O,disabled:!g.value||m.value,class:V([[g.value&&!m.value?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-gray-600 dark:text-gray-400"],"inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors"])},[m.value?(a(),i("div",ae)):(a(),_(l(G),{key:0,class:"h-4 w-4 mr-2"})),b(" "+d(m.value?"Kaydediliyor...":"Tüm Değişiklikleri Kaydet"),1)],10,te)])])]),g.value?(a(),i("div",re,[e("div",se,[e("div",ie,[n(l(J),{class:"h-5 w-5 text-orange-600"}),e("span",le,d(u.value.length)+" kaydedilmemiş değişiklik ",1)]),e("button",{onClick:$,class:"text-sm text-orange-600 hover:text-orange-700 dark:text-orange-400 dark:hover:text-orange-300 transition-colors"}," Değişiklikleri İptal Et ")]),e("div",ne,[(a(!0),i(D,null,z(u.value.slice(0,3),s=>(a(),i("div",{key:s.timestamp,class:"text-xs text-orange-700 dark:text-orange-300"}," • "+d(j(s)),1))),128)),u.value.length>3?(a(),i("div",de," ... ve "+d(u.value.length-3)+" değişiklik daha ",1)):x("",!0)])])):x("",!0)])]),e("div",oe,[E.value?(a(),i("div",me,t[2]||(t[2]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"},null,-1),e("span",{class:"ml-3 text-gray-500 dark:text-gray-400"},"Timeline yükleniyor...",-1)]))):(a(),i("div",ue,[e("div",ce,[o.timelineData.length===0?(a(),i("div",ge,[e("div",ke,[n(l(M),{class:"h-full w-full"})]),t[4]||(t[4]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"Program bulunamadı",-1)),t[5]||(t[5]=e("p",{class:"text-gray-500 dark:text-gray-400"},"Bu etkinlik için henüz program oluşturulmamış.",-1)),n(l(w),{href:r.route("admin.events.show",o.event.id),class:"mt-4 inline-flex items-center px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700"},{default:y(()=>[n(l(U),{class:"h-4 w-4 mr-2"}),t[3]||(t[3]=b(" Etkinliği Düzenle "))]),_:1,__:[3]},8,["href"])])):(a(),i("div",be,[e("div",ve,[t[6]||(t[6]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"}," Drag & Drop Timeline ",-1)),t[7]||(t[7]=e("p",{class:"text-gray-500 mb-4"}," Timeline bileşeni yakında eklenecek ",-1)),e("div",ye," • "+d(o.timelineData.length)+" gün ",1)])]))])]))]),v.value.length>0?(a(),i("div",xe,[e("div",he,[e("div",fe,[n(l(C),{class:"h-6 w-6 text-red-500 mt-0.5 flex-shrink-0"}),e("div",pe,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold text-red-800 dark:text-red-200 mb-2"}," Tespit Edilen Çakışmalar ",-1)),e("div",_e,[(a(!0),i(D,null,z(v.value,s=>(a(),i("div",{key:s.id,class:"bg-white dark:bg-red-900/30 rounded-lg p-3"},[e("div",we,d(s.venue_name)+" - Zaman Çakışması ",1),e("div",De,' "'+d(s.session1_title)+'" ile "'+d(s.session2_title)+'" arasında '+d(s.overlap_minutes)+" dakika çakışma ",1)]))),128))])])])])])):x("",!0),e("div",ze,[e("div",Te,[e("div",Ce,[n(l(P),{class:"h-6 w-6 text-blue-500 mt-0.5 flex-shrink-0"}),t[9]||(t[9]=e("div",null,[e("h3",{class:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2"}," Sürükle-Bırak Kullanım Rehberi "),e("div",{class:"text-sm text-blue-700 dark:text-blue-300 space-y-1"},[e("div",null,"• Oturumları sürükleyerek farklı salonlara veya zamanlara taşıyabilirsiniz"),e("div",null,"• Yeşil alan: Geçerli bırakma alanı"),e("div",null,"• Kırmızı alan: Çakışma nedeniyle geçersiz alan"),e("div",null,"• Mavi alan: Oturumun mevcut konumu"),e("div",null,'• Değişiklikler otomatik olarak kaydedilmez, "Kaydet" butonuna basmanız gerekir')])],-1))])])])]),_:1},8,["page-title","breadcrumbs"]))}},Je=L(Ee,[["__scopeId","data-v-1c5d0dd6"]]);export{Je as default};
