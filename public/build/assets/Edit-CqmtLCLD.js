import{d as z,B as te,g as j,y as re,s as T,G as ae,c as se,o as m,w as h,b as o,a as e,u as n,l as oe,f as u,h as y,t as k,i as d,p as le,e as N,v as J,S as q,F as I,J as ie}from"./app-BkLrAedk.js";import{A as ne}from"./AdminLayout-CHzjQs8f.js";import{F as x}from"./FormInput-CavIJ5sh.js";import{F as de}from"./FormSelect-EUIpJxBM.js";import{F as me}from"./FormTextarea-BvD5xpuU.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as ge}from"./PencilSquareIcon-o7Yx3KSJ.js";import{r as R}from"./MicrophoneIcon-C5nLQNHP.js";import{r as B}from"./UserGroupIcon-CCxdIZXN.js";import{r as pe}from"./UserIcon-Km4WuPNA.js";import{r as ce}from"./EnvelopeIcon-VfHNB7ST.js";import{c as fe}from"./UsersIcon-BSahiIS1.js";import{r as ye}from"./TrashIcon-BmbtPUrI.js";import{r as be}from"./XMarkIcon-BBq-wmW1.js";import{r as ve}from"./PhotoIcon-CmjDgklI.js";import{r as xe}from"./ArrowLeftIcon-7IsU4O-a.js";import{r as _e}from"./ArrowPathIcon-C5sbY9KV.js";import{r as he}from"./CheckIcon-DtsMpUWF.js";import{r as ke}from"./ExclamationTriangleIcon-DdIvds6G.js";import"./HomeIcon-BQBmvNzm.js";import"./ClockIcon-DifFxn8x.js";/* empty css                                                                   */import"./HashtagIcon-BDv2RVeq.js";import"./ChevronUpIcon-DF0hFMjr.js";const we={class:"w-full"},Ve={class:"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-8"},ze={class:"px-6 py-5 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900"},je={class:"flex items-center justify-between"},Be={class:"flex items-center"},$e={class:"flex-shrink-0"},Fe={class:"h-10 w-10 bg-gray-600 rounded-lg flex items-center justify-center"},Pe={class:"ml-4"},Ue={class:"text-sm text-gray-500 dark:text-gray-400"},Ee={class:"flex items-center space-x-4"},Se={key:0,class:"h-12 w-12 rounded-lg overflow-hidden border-2 border-white shadow-md"},De=["src","alt"],Ke={key:1,class:"h-12 w-12 rounded-lg bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center shadow-md"},Ce={class:"text-white font-semibold text-lg"},Ae={class:"flex space-x-2"},Ge={key:0,class:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},Me={key:1,class:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-300 text-gray-900 dark:bg-gray-600 dark:text-gray-200"},Le={class:"space-y-6"},Oe={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center"},Te={class:"grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Ne={class:"lg:col-span-3 xl:col-span-4"},Je={class:"lg:col-span-1 xl:col-span-2"},qe={class:"lg:col-span-1 xl:col-span-2"},Ie={class:"lg:col-span-1 xl:col-span-2"},Re={class:"lg:col-span-1 xl:col-span-2"},Ye={class:"space-y-6 border-t border-gray-200 dark:border-gray-700 pt-8"},He={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center"},Qe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},We={class:"space-y-6 border-t border-gray-200 dark:border-gray-700 pt-8"},Xe={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center"},Ze={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},et={class:"flex items-start space-x-3 p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-800/50"},tt={class:"flex-1"},rt={for:"is_speaker",class:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center"},at={key:0,class:"mt-2 text-xs text-gray-600 dark:text-gray-400"},st={class:"flex items-start space-x-3 p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-800/50"},ot={class:"flex-1"},lt={for:"is_moderator",class:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center"},it={key:0,class:"mt-2 text-xs text-gray-600 dark:text-gray-400"},nt={class:"space-y-6 border-t border-gray-200 dark:border-gray-700 pt-8"},dt={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center"},mt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ut={class:"lg:col-span-2"},gt={class:"lg:col-span-1"},pt={class:"space-y-4"},ct={key:0,class:"relative group"},ft={class:"h-32 w-32 rounded-lg overflow-hidden border-2 border-gray-200 dark:border-gray-600 mx-auto"},yt=["src","alt"],bt={class:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center"},vt={key:1,class:"relative"},xt={class:"h-32 w-32 rounded-lg overflow-hidden border-2 border-gray-300 dark:border-gray-600 mx-auto"},_t=["src"],ht={class:"absolute -top-2 -right-2"},kt={class:"flex items-center justify-center w-full"},wt={class:"flex flex-col items-center justify-center w-full h-24 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 dark:border-gray-600 transition-colors"},Vt={class:"flex flex-col items-center justify-center pt-2 pb-3"},zt={key:0,class:"text-sm text-red-600 dark:text-red-400 mt-2"},jt={class:"flex items-center justify-between pt-8 border-t border-gray-200 dark:border-gray-700"},Bt={class:"flex items-center space-x-3"},$t={class:"flex space-x-3"},Ft=["disabled"],Pt=["disabled"],Ut={key:0,class:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},Et={class:"flex items-start"},St={__name:"Edit",props:{participant:{type:Object,required:!1,default:()=>({id:null,organization_id:null,first_name:"",last_name:"",title:"",email:"",phone:"",affiliation:"",bio:"",photo_url:"",is_speaker:!1,is_moderator:!1,organization:null,presentations:[],moderated_sessions:[]})},organizations:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})}},setup($){const i=$,a=z(()=>{var s,t,v,f,l,F,P,U,E,S,D,K,C,A,G,M,L,O;return{id:((s=i.participant)==null?void 0:s.id)||null,organization_id:((t=i.participant)==null?void 0:t.organization_id)||null,first_name:((v=i.participant)==null?void 0:v.first_name)||"",last_name:((f=i.participant)==null?void 0:f.last_name)||"",full_name:((l=i.participant)==null?void 0:l.full_name)||`${((F=i.participant)==null?void 0:F.first_name)||""} ${((P=i.participant)==null?void 0:P.last_name)||""}`.trim()||"İsimsiz Katılımcı",title:((U=i.participant)==null?void 0:U.title)||"",email:((E=i.participant)==null?void 0:E.email)||"",phone:((S=i.participant)==null?void 0:S.phone)||"",affiliation:((D=i.participant)==null?void 0:D.affiliation)||"",bio:((K=i.participant)==null?void 0:K.bio)||"",photo_url:((C=i.participant)==null?void 0:C.photo_url)||"",is_speaker:!!((A=i.participant)!=null&&A.is_speaker),is_moderator:!!((G=i.participant)!=null&&G.is_moderator),organization:((M=i.participant)==null?void 0:M.organization)||null,presentations:((L=i.participant)==null?void 0:L.presentations)||[],moderated_sessions:((O=i.participant)==null?void 0:O.moderated_sessions)||[]}}),r=te({organization_id:null,first_name:"",last_name:"",title:"",email:"",phone:"",affiliation:"",bio:"",photo:null,is_speaker:!1,is_moderator:!1}),p=j(!1),b=j({organization_id:null,first_name:"",last_name:"",title:"",email:"",phone:"",affiliation:"",bio:"",is_speaker:!1,is_moderator:!1}),c=j(null),g=z(()=>i.errors||{});re(()=>{r.organization_id=a.value.organization_id,r.first_name=a.value.first_name,r.last_name=a.value.last_name,r.title=a.value.title,r.email=a.value.email,r.phone=a.value.phone,r.affiliation=a.value.affiliation,r.bio=a.value.bio,r.is_speaker=a.value.is_speaker,r.is_moderator=a.value.is_moderator,b.value={organization_id:a.value.organization_id,first_name:a.value.first_name,last_name:a.value.last_name,title:a.value.title,email:a.value.email,phone:a.value.phone,affiliation:a.value.affiliation,bio:a.value.bio,is_speaker:a.value.is_speaker,is_moderator:a.value.is_moderator}});const Y=z(()=>[{label:"Ana Sayfa",href:route("admin.dashboard")},{label:"Katılımcılar",href:route("admin.participants.index")},{label:a.value.full_name,href:a.value.id?route("admin.participants.show",a.value.id):null},{label:"Düzenle",href:null}]),_=z(()=>Object.keys(b.value).some(s=>r[s]!==b.value[s])||c.value!==null),H=s=>s?s.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2):"?",Q=async()=>{if(!a.value.id){console.error("Participant ID missing");return}p.value=!0;try{await ie.put(route("admin.participants.update",a.value.id),r,{onSuccess:()=>{Object.keys(r).forEach(s=>{s!=="photo"&&(b.value[s]=r[s])}),c.value=null,p.value=!1},onError:s=>{console.error("Form submission errors:",s),p.value=!1},onFinish:()=>{p.value=!1}})}catch(s){console.error("Submit error:",s),p.value=!1}},W=()=>{Object.keys(b.value).forEach(s=>{r[s]=b.value[s]}),r.photo=null,c.value=null},X=s=>{const t=s.target.files[0];if(!t)return;if(!["image/jpeg","image/png","image/jpg"].includes(t.type)){alert("Sadece JPEG, PNG veya JPG dosyaları yüklenebilir.");return}if(t.size>2*1024*1024){alert("Dosya boyutu 2MB'dan küçük olmalıdır.");return}r.photo=t;const f=new FileReader;f.onload=l=>{c.value=l.target.result},f.readAsDataURL(t)},Z=()=>{r.photo=null,c.value=null},ee=()=>{r.photo="remove",c.value=null};let w=!1;T(()=>r,()=>{_.value&&!w?window.addEventListener("beforeunload",V):window.removeEventListener("beforeunload",V)},{deep:!0});const V=s=>{_.value&&!w&&(s.preventDefault(),s.returnValue="")};return T(()=>p,s=>{s?(w=!0,window.removeEventListener("beforeunload",V)):w=!1}),ae(()=>{window.removeEventListener("beforeunload",V)}),(s,t)=>(m(),se(ne,{"page-title":`${a.value.full_name} - Düzenle`,"page-subtitle":"Katılımcı bilgilerini güncelleyin",breadcrumbs:Y.value},{default:h(()=>{var v,f;return[o(n(oe),{title:`${a.value.full_name} - Düzenle`},null,8,["title"]),e("div",we,[e("div",Ve,[e("div",ze,[e("div",je,[e("div",Be,[e("div",$e,[e("div",Fe,[o(n(ge),{class:"h-6 w-6 text-white"})])]),e("div",Pe,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Katılımcı Düzenle",-1)),e("p",Ue,k(a.value.full_name),1)])]),e("div",Ee,[a.value.photo_url?(m(),u("div",Se,[e("img",{src:a.value.photo_url,alt:a.value.full_name,class:"h-full w-full object-cover"},null,8,De)])):(m(),u("div",Ke,[e("span",Ce,k(H(a.value.full_name)),1)])),e("div",Ae,[a.value.is_speaker?(m(),u("span",Ge,[o(n(R),{class:"w-3 h-3 mr-1"}),t[11]||(t[11]=d(" Konuşmacı "))])):y("",!0),a.value.is_moderator?(m(),u("span",Me,[o(n(B),{class:"w-3 h-3 mr-1"}),t[12]||(t[12]=d(" Moderatör "))])):y("",!0)])])])]),e("form",{onSubmit:le(Q,["prevent"]),class:"p-6 space-y-8"},[e("div",Le,[e("div",null,[e("h3",Oe,[o(n(pe),{class:"h-5 w-5 mr-2 text-gray-600"}),t[13]||(t[13]=d(" Temel Bilgiler "))])]),e("div",Te,[e("div",Ne,[o(de,{modelValue:r.organization_id,"onUpdate:modelValue":t[0]||(t[0]=l=>r.organization_id=l),label:"Organizasyon *",options:$.organizations,"option-value":"id","option-label":"name",required:"","error-message":g.value.organization_id,placeholder:"Organizasyon seçin"},null,8,["modelValue","options","error-message"])]),e("div",Je,[o(x,{modelValue:r.first_name,"onUpdate:modelValue":t[1]||(t[1]=l=>r.first_name=l),label:"Ad *",placeholder:"Adı girin",required:"","error-message":g.value.first_name,maxlength:255,"show-counter":""},null,8,["modelValue","error-message"])]),e("div",qe,[o(x,{modelValue:r.last_name,"onUpdate:modelValue":t[2]||(t[2]=l=>r.last_name=l),label:"Soyad *",placeholder:"Soyadı girin",required:"","error-message":g.value.last_name,maxlength:255,"show-counter":""},null,8,["modelValue","error-message"])]),e("div",Ie,[o(x,{modelValue:r.title,"onUpdate:modelValue":t[3]||(t[3]=l=>r.title=l),label:"Ünvan",placeholder:"Ünvanı girin (örn: Dr., Prof., vb.)","error-message":g.value.title,maxlength:255,"show-counter":""},null,8,["modelValue","error-message"])]),e("div",Re,[o(x,{modelValue:r.affiliation,"onUpdate:modelValue":t[4]||(t[4]=l=>r.affiliation=l),label:"Kurum/Affiliation",placeholder:"Çalıştığı kurumu girin","error-message":g.value.affiliation,maxlength:255,"show-counter":""},null,8,["modelValue","error-message"])])])]),e("div",Ye,[e("div",null,[e("h3",He,[o(n(ce),{class:"h-5 w-5 mr-2 text-gray-600"}),t[14]||(t[14]=d(" İletişim Bilgileri "))])]),e("div",Qe,[e("div",null,[o(x,{modelValue:r.email,"onUpdate:modelValue":t[5]||(t[5]=l=>r.email=l),type:"email",label:"E-posta",placeholder:"E-posta adresini girin","error-message":g.value.email,maxlength:255},{helper:h(()=>t[15]||(t[15]=[e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," Katılımcıya bildirimler bu adrese gönderilecektir ",-1)])),_:1},8,["modelValue","error-message"])]),e("div",null,[o(x,{modelValue:r.phone,"onUpdate:modelValue":t[6]||(t[6]=l=>r.phone=l),type:"tel",label:"Telefon",placeholder:"Telefon numarasını girin","error-message":g.value.phone,maxlength:255},null,8,["modelValue","error-message"])])])]),e("div",We,[e("div",null,[e("h3",Xe,[o(n(B),{class:"h-5 w-5 mr-2 text-gray-600"}),t[16]||(t[16]=d(" Roller "))])]),e("div",Ze,[e("div",et,[N(e("input",{id:"is_speaker","onUpdate:modelValue":t[7]||(t[7]=l=>r.is_speaker=l),type:"checkbox",class:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300 rounded mt-1 transition-colors"},null,512),[[J,r.is_speaker]]),e("div",tt,[e("label",rt,[o(n(R),{class:"h-4 w-4 mr-2 text-gray-600"}),t[17]||(t[17]=d(" Konuşmacı "))]),t[18]||(t[18]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," Bu katılımcı sunumlar yapabilir ",-1)),r.is_speaker?(m(),u("div",at,k(((v=a.value.presentations)==null?void 0:v.length)||0)+" adet sunum var ",1)):y("",!0)])]),e("div",st,[N(e("input",{id:"is_moderator","onUpdate:modelValue":t[8]||(t[8]=l=>r.is_moderator=l),type:"checkbox",class:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300 rounded mt-1 transition-colors"},null,512),[[J,r.is_moderator]]),e("div",ot,[e("label",lt,[o(n(B),{class:"h-4 w-4 mr-2 text-gray-600"}),t[19]||(t[19]=d(" Moderatör "))]),t[20]||(t[20]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," Bu katılımcı oturum modere edebilir ",-1)),r.is_moderator?(m(),u("div",it,k(((f=a.value.moderated_sessions)==null?void 0:f.length)||0)+" adet oturum modere ediyor ",1)):y("",!0)])])])]),e("div",nt,[e("div",null,[e("h3",dt,[o(n(fe),{class:"h-5 w-5 mr-2 text-gray-600"}),t[21]||(t[21]=d(" Profil Bilgileri "))])]),e("div",mt,[e("div",ut,[o(me,{modelValue:r.bio,"onUpdate:modelValue":t[9]||(t[9]=l=>r.bio=l),label:"Biyografi",placeholder:"Katılımcının biyografisini girin",rows:6,"error-message":g.value.bio,maxlength:1e3,"show-counter":""},{helper:h(()=>t[22]||(t[22]=[e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," Bu bilgi katılımcının profil sayfasında gösterilecektir ",-1)])),_:1},8,["modelValue","error-message"])]),e("div",gt,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," Profil Fotoğrafı ",-1)),e("div",pt,[a.value.photo_url&&!c.value?(m(),u("div",ct,[e("div",ft,[e("img",{src:a.value.photo_url,alt:a.value.full_name,class:"h-full w-full object-cover"},null,8,yt)]),e("div",bt,[e("button",{type:"button",onClick:ee,class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700 focus:ring-2 focus:ring-gray-500 transition-colors"},[o(n(ye),{class:"h-4 w-4 mr-2"}),t[23]||(t[23]=d(" Kaldır "))])])])):y("",!0),c.value?(m(),u("div",vt,[e("div",xt,[e("img",{src:c.value,alt:"Yeni fotoğraf önizleme",class:"h-full w-full object-cover"},null,8,_t)]),e("div",ht,[e("button",{type:"button",onClick:Z,class:"inline-flex items-center justify-center w-6 h-6 bg-gray-600 text-white rounded-full hover:bg-gray-700 focus:ring-2 focus:ring-gray-500 transition-colors"},[o(n(be),{class:"h-4 w-4"})])])])):y("",!0),e("div",kt,[e("label",wt,[e("div",Vt,[o(n(ve),{class:"w-6 h-6 mb-1 text-gray-400"}),t[24]||(t[24]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},[e("span",{class:"font-semibold"},"Yeni fotoğraf yükle")],-1)),t[25]||(t[25]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"JPEG, PNG (Max. 2MB)",-1))]),e("input",{type:"file",accept:"image/jpeg,image/png,image/jpg",onChange:X,class:"hidden"},null,32)])])]),g.value.photo?(m(),u("p",zt,k(g.value.photo),1)):y("",!0)])])]),e("div",jt,[e("div",Bt,[o(n(q),{href:a.value.id?s.route("admin.participants.show",a.value.id):s.route("admin.participants.index"),class:"inline-flex items-center px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors shadow-sm"},{default:h(()=>[o(n(xe),{class:"h-4 w-4 mr-2"}),t[27]||(t[27]=d(" Geri Dön "))]),_:1,__:[27]},8,["href"]),o(n(q),{href:s.route("admin.participants.index"),class:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},{default:h(()=>t[28]||(t[28]=[d(" Katılımcı Listesi ")])),_:1,__:[28]},8,["href"])]),e("div",$t,[e("button",{type:"button",onClick:W,disabled:p.value||!_.value,class:"inline-flex items-center px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"},[o(n(_e),{class:"h-4 w-4 mr-2"}),t[29]||(t[29]=d(" Sıfırla "))],8,Ft),e("button",{type:"submit",disabled:p.value||!_.value,class:"inline-flex items-center px-6 py-2.5 bg-gray-800 text-white text-sm font-medium rounded-lg hover:bg-gray-900 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed border border-gray-700"},[p.value?(m(),u(I,{key:0},[t[30]||(t[30]=e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},null,-1)),t[31]||(t[31]=d(" Güncelleniyor... "))],64)):(m(),u(I,{key:1},[o(n(he),{class:"h-4 w-4 mr-2"}),t[32]||(t[32]=d(" Katılımcıyı Güncelle "))],64))],8,Pt)])])],32)]),_.value?(m(),u("div",Ut,[e("div",Et,[o(n(ke),{class:"h-5 w-5 text-gray-600 dark:text-gray-400 mt-0.5 flex-shrink-0"}),t[33]||(t[33]=e("div",{class:"ml-3"},[e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Kaydedilmemiş Değişiklikler"),e("div",{class:"mt-2 text-sm text-gray-700 dark:text-gray-200"},[e("p",null,"Formu değiştirdiniz ancak henüz kaydetmediniz. Sayfadan ayrılmadan önce değişikliklerinizi kaydetmeyi unutmayın.")])],-1))])])):y("",!0)])]}),_:1},8,["page-title","breadcrumbs"]))}},sr=ue(St,[["__scopeId","data-v-fe80cced"]]);export{sr as default};
