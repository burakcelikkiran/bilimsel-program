import{x as L,g as C,d as D,s as E,y as M,c as j,o as i,w as h,b as u,a as e,u as s,l as q,f as n,h as g,t as m,n as f,i as c,p as N,e as x,q as w,v as O,S,F as G}from"./app-BkLrAedk.js";import{r as U,A}from"./AdminLayout-CHzjQs8f.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as K}from"./PencilSquareIcon-o7Yx3KSJ.js";import{r as P}from"./CalendarDaysIcon-RpqlH8E2.js";import{r as T}from"./ExclamationTriangleIcon-DdIvds6G.js";import{r as R}from"./ArrowLeftIcon-7IsU4O-a.js";import{r as W}from"./ArrowPathIcon-C5sbY9KV.js";import{r as H}from"./CheckIcon-DtsMpUWF.js";import"./HomeIcon-BQBmvNzm.js";import"./UsersIcon-BSahiIS1.js";import"./ClockIcon-DifFxn8x.js";const J={class:"w-full"},Q={class:"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-8"},X={class:"px-6 py-5 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20"},Y={class:"flex items-center justify-between"},Z={class:"flex items-center"},ee={class:"flex-shrink-0"},te={class:"h-10 w-10 bg-purple-600 rounded-lg flex items-center justify-center"},re={class:"ml-4"},se={class:"text-sm text-gray-500 dark:text-gray-400"},ae={class:"flex items-center space-x-3"},oe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},de={class:"lg:col-span-2"},le={key:0,class:"mt-2 text-sm text-red-600"},ie={key:0,class:"mt-2 text-sm text-red-600"},ne={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ue={class:"relative"},me=["min","max"],ge={key:0,class:"mt-2 text-sm text-red-600"},ye={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},ce={key:0},be={class:"px-4 py-3 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg"},pe={class:"flex items-center text-purple-700 dark:text-purple-300"},ve={class:"font-semibold"},fe={class:"text-sm opacity-75"},xe={class:"px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-800/50"},ke={class:"flex items-center"},_e={key:0,class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800"},he={class:"flex items-start"},we={class:"ml-3"},De={class:"mt-2 text-sm text-blue-700 dark:text-blue-200"},Ee={class:"list-disc list-inside mt-1 space-y-1"},Se={key:0},Ge={key:1},Te={key:2},ze={key:3},Be={class:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700"},Fe={class:"flex items-center space-x-3"},Ve={class:"flex space-x-3"},$e=["disabled"],Le=["disabled"],Ce={key:0,class:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-6 border border-yellow-200 dark:border-yellow-800"},Me={class:"flex items-start"},je={class:"ml-3"},qe={class:"mt-2 text-sm text-yellow-700 dark:text-yellow-200"},Ne={__name:"Edit",props:{event:{type:Object,required:!0},eventDay:{type:Object,required:!0}},setup(o){const d=o,p=a=>a?new Date(a).toISOString().split("T")[0]:"",r=L({display_name:d.eventDay.display_name||"",date:p(d.eventDay.date)||"",sort_order:d.eventDay.sort_order||0,is_active:d.eventDay.is_active||!1}),l=C({display_name:d.eventDay.display_name||"",date:p(d.eventDay.date)||"",sort_order:d.eventDay.sort_order||0,is_active:d.eventDay.is_active||!1}),z=D(()=>[{label:"Etkinlikler",href:route("admin.events.index")},{label:d.event.name,href:route("admin.events.show",d.event.slug)},{label:"Günler",href:route("admin.events.days.index",d.event.slug)},{label:d.eventDay.display_name||"Etkinlik Günü",href:route("admin.events.days.show",[d.event.slug,d.eventDay.id])},{label:"Düzenle",href:null}]),b=D(()=>r.display_name!==l.value.display_name||r.date!==l.value.date||r.sort_order!==l.value.sort_order||r.is_active!==l.value.is_active),k=a=>a?new Date(a).toLocaleDateString("tr-TR",{day:"numeric",month:"short",year:"numeric"}):"-",B=a=>a?new Date(a).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-",F=a=>a?new Date(a).toLocaleDateString("tr-TR",{weekday:"long"}):"-",V=()=>{r.transform(a=>({...a,is_active:!!a.is_active})).put(route("admin.events.days.update",[d.event.slug,d.eventDay.id]),{onSuccess:()=>{l.value={display_name:r.display_name,date:r.date,sort_order:r.sort_order,is_active:r.is_active}},onError:a=>{console.error("Form submission errors:",a)}})},$=()=>{r.display_name=l.value.display_name,r.date=l.value.date,r.sort_order=l.value.sort_order,r.is_active=l.value.is_active};let v=!1;E(()=>r.data(),()=>{b.value&&!v?window.addEventListener("beforeunload",_):window.removeEventListener("beforeunload",_)},{deep:!0});const _=a=>{b.value&&!v&&(a.preventDefault(),a.returnValue="")};return E(()=>r.processing,a=>{a?(v=!0,window.removeEventListener("beforeunload",_)):v=!1}),M(()=>{console.log("Edit component mounted:",{eventDay:d.eventDay,form:r.data(),originalForm:l.value})}),(a,t)=>(i(),j(A,{"page-title":`${o.eventDay.display_name||"Etkinlik Günü"} - Düzenle`,"page-subtitle":`${o.event.name} etkinliği günü düzenleyin`,breadcrumbs:z.value},{default:h(()=>[u(s(q),{title:`${o.eventDay.display_name||"Etkinlik Günü"} - Düzenle`},null,8,["title"]),e("div",J,[e("div",Q,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[u(s(K),{class:"h-6 w-6 text-white"})])]),e("div",re,[t[4]||(t[4]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Etkinlik Günü Düzenle",-1)),e("p",se,m(o.eventDay.display_name||"Başlıksız Gün")+" - "+m(k(o.eventDay.date)),1)])]),e("div",ae,[e("span",{class:f(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",o.eventDay.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"])},[t[5]||(t[5]=e("span",{class:"w-1.5 h-1.5 mr-1.5 rounded-full bg-current opacity-75"},null,-1)),c(" "+m(o.eventDay.is_active?"Aktif":"Pasif"),1)],2)])])]),e("form",{onSubmit:N(V,["prevent"]),class:"p-6 space-y-6"},[e("div",oe,[e("div",de,[t[6]||(t[6]=e("label",{for:"display_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Gün Başlığı * ",-1)),x(e("input",{id:"display_name","onUpdate:modelValue":t[0]||(t[0]=y=>s(r).display_name=y),type:"text",required:"",class:f(["block w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 shadow-sm hover:shadow-md focus:shadow-md",s(r).errors.display_name?"border-red-300 focus:ring-red-500":""]),placeholder:"Örn: Kongre 1. Gün"},null,2),[[w,s(r).display_name]]),s(r).errors.display_name?(i(),n("p",le,m(s(r).errors.display_name),1)):g("",!0)]),e("div",null,[t[7]||(t[7]=e("label",{for:"sort_order",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Sıra No ",-1)),x(e("input",{id:"sort_order","onUpdate:modelValue":t[1]||(t[1]=y=>s(r).sort_order=y),type:"number",min:"0",class:f(["block w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 shadow-sm hover:shadow-md focus:shadow-md",s(r).errors.sort_order?"border-red-300 focus:ring-red-500":""]),placeholder:"0"},null,2),[[w,s(r).sort_order,void 0,{number:!0}]]),s(r).errors.sort_order?(i(),n("p",ie,m(s(r).errors.sort_order),1)):g("",!0)])]),e("div",ne,[e("div",null,[t[8]||(t[8]=e("label",{for:"date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Tarih * ",-1)),e("div",ue,[u(s(P),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),x(e("input",{id:"date","onUpdate:modelValue":t[2]||(t[2]=y=>s(r).date=y),type:"date",required:"",class:f(["block w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 shadow-sm hover:shadow-md focus:shadow-md",s(r).errors.date?"border-red-300 focus:ring-red-500":""]),min:p(o.event.start_date),max:p(o.event.end_date)},null,10,me),[[w,s(r).date]])]),s(r).errors.date?(i(),n("p",ge,m(s(r).errors.date),1)):g("",!0),e("p",ye," Tarih "+m(k(o.event.start_date))+" - "+m(k(o.event.end_date))+" arasında olmalıdır ",1)]),s(r).date?(i(),n("div",ce,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Tarih Önizleme ",-1)),e("div",be,[e("div",pe,[u(s(U),{class:"h-5 w-5 mr-2"}),e("div",null,[e("div",ve,m(B(s(r).date)),1),e("div",fe,m(F(s(r).date)),1)])])])])):g("",!0),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Durum ",-1)),e("div",xe,[e("label",ke,[x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=y=>s(r).is_active=y),type:"checkbox",class:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded transition-colors"},null,512),[[O,s(r).is_active]]),t[10]||(t[10]=e("span",{class:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300"}," Günü aktif tut ",-1))])])])]),b.value?(i(),n("div",_e,[e("div",he,[u(s(T),{class:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e("div",we,[t[13]||(t[13]=e("h4",{class:"text-sm font-medium text-blue-900 dark:text-blue-100"},"Değişiklikler Tespit Edildi",-1)),e("div",De,[t[12]||(t[12]=e("p",null,"Aşağıdaki alanlar değiştirildi:",-1)),e("ul",Ee,[s(r).display_name!==l.value.display_name?(i(),n("li",Se,"Gün başlığı")):g("",!0),s(r).date!==l.value.date?(i(),n("li",Ge,"Tarih")):g("",!0),s(r).sort_order!==l.value.sort_order?(i(),n("li",Te,"Sıra numarası")):g("",!0),s(r).is_active!==l.value.is_active?(i(),n("li",ze,"Durum")):g("",!0)])])])])])):g("",!0),e("div",Be,[e("div",Fe,[u(s(S),{href:a.route("admin.events.days.show",[o.event.slug,o.eventDay.id]),class:"inline-flex items-center px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors shadow-sm"},{default:h(()=>[u(s(R),{class:"h-4 w-4 mr-2"}),t[14]||(t[14]=c(" Geri Dön "))]),_:1,__:[14]},8,["href"]),u(s(S),{href:a.route("admin.events.days.index",o.event.slug),class:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},{default:h(()=>t[15]||(t[15]=[c(" Listeye Dön ")])),_:1,__:[15]},8,["href"])]),e("div",Ve,[e("button",{type:"button",onClick:$,disabled:s(r).processing||!b.value,class:"inline-flex items-center px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"},[u(s(W),{class:"h-4 w-4 mr-2"}),t[16]||(t[16]=c(" Sıfırla "))],8,$e),e("button",{type:"submit",disabled:s(r).processing||!b.value,class:"inline-flex items-center px-6 py-2.5 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"},[s(r).processing?(i(),n(G,{key:0},[t[17]||(t[17]=e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},null,-1)),t[18]||(t[18]=c(" Güncelleniyor... "))],64)):(i(),n(G,{key:1},[u(s(H),{class:"h-4 w-4 mr-2"}),t[19]||(t[19]=c(" Değişiklikleri Kaydet "))],64))],8,Le)])])],32)]),o.eventDay.program_sessions_count>0?(i(),n("div",Ce,[e("div",Me,[u(s(T),{class:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),e("div",je,[t[21]||(t[21]=e("h4",{class:"text-sm font-medium text-yellow-900 dark:text-yellow-100"},"Dikkat: Program Oturumları Mevcut",-1)),e("div",qe,[e("p",null,"Bu günde "+m(o.eventDay.program_sessions_count)+" adet program oturumu bulunmaktadır. Tarih değişikliği yaparsanız:",1),t[20]||(t[20]=e("ul",{class:"list-disc list-inside mt-2 space-y-1"},[e("li",null,"Mevcut oturumlar yeni tarihe taşınacaktır"),e("li",null,"Katılımcı bilgilendirmeleri gerekli olabilir"),e("li",null,"Program çizelgesi güncellenmesi gerekebilir")],-1))])])])])):g("",!0)])]),_:1},8,["page-title","page-subtitle","breadcrumbs"]))}},Ye=I(Ne,[["__scopeId","data-v-2f2ea60a"]]);export{Ye as default};
